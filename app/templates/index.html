<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Prompt Crafting Competition</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://cdn.socket.io/4.5.0/socket.io.min.js"></script>
</head>
<body>
    <h1>Prompt Crafting Competition</h1>
    <form id="promptForm">
        <label for="user">Your Name:</label>
        <input type="text" id="user" required>
        <label for="prompt">Your Prompt:</label>
        <textarea id="prompt" required></textarea>
        <button type="submit">Submit</button>
    </form>

    <h2>Leaderboard</h2>
    <div id="leaderboard">
        {% for entry in leaderboard %}
            <p>{{ entry.user }}: {{ entry.score }}</p>
        {% endfor %}
    </div>

    <script>
        const socket = io();

        // Update leaderboard in real-time
        // socket.on("update_leaderboard", (data) => {
        //     const leaderboardDiv = document.getElementById("leaderboard");
        //     leaderboardDiv.innerHTML = ""; // Clear old leaderboard
        //     data.forEach((entry) => {
        //         const p = document.createElement("p");
        //         p.textContent = `${entry.user}: ${entry.score}`;
        //         leaderboardDiv.appendChild(p);
        //     });
        // });

        // // Handle form submission
        // document.getElementById("promptForm").addEventListener("submit", (e) => {
        //     e.preventDefault();
        //     const user = document.getElementById("user").value;
        //     const prompt = document.getElementById("prompt").value;
        //     socket.emit("submit_prompt", { user, prompt });
        // });
        socket.emit("submit_prompt", { user: user, prompt: prompt });
        socket.on("update_leaderboard", function(data) {
            const leaderboardDiv = document.getElementById("leaderboard");
            leaderboardDiv.innerHTML = "";
            data.forEach(function(entry) {
                const p = document.createElement("p");
                p.textContent = `${entry.user}: ${entry.score}`;
                leaderboardDiv.appendChild(p);
            });
        });
    </script>
</body>
</html>